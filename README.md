# indiedown: Individual RMarkdown Templates

Easy Generation of Customized RMarkdown Templates

## Installation

Currently a private repo on GitHub, pull and install.


## `indiedown` Asset Folder

Template assets are stored in a folder `indiedown`. The folder is usually located in the `inst` folder of an R package, but could be put to any location.

The folder contains all the necessary information to customize your markdown template. Below is a description of its elements:

### `default.yaml` (required)

`default.yaml` is the only required element of an indiedown template.
It specifies the default pandoc options used by your template.
To experiment with pandoc options, simply add them to the YAML header of a standard RMarkdown document.

Most relevant LaTeX options can be set as pandoc options. For example, pandoc options allow you to set a customized font or a user defined geometry. If possible always prefer Pandoc options instead of LaTeX (covered below), as this will minimize unwanted interactions with other options.

For a detailed description of all pandoc options, see the 'Variables for LaTeX' section in the [pandoc Manual](https://pandoc.org/MANUAL.html#).

`default.yaml`, as well as `preamble.tex` supports substitution of the variable `<asset_path>`, which is explained below.


### `preamble.tex` (optional)

Sometimes, pandoc options are just not enough. While pandoc allows you to directly apply single LaTeX commands in the YAML header (using `headers-include`), `preamble.tex` offers a more convenient way to include LaTeX commands at the beginning of your document.

To include commands, simply edit `preamble.tex`.
Common options set in `preamble.tex` are the modification of section headings (e.g., `\usepackage[small]{titlesec}`), the provision of the `H` float modifier
(`\usepackage{float}`), or the packages used by [kableExtra](https://CRAN.R-project.org/package=kableExtra).

For most customizations, it is recommended to turn off the default LaTeX title page, using
`\renewcommand\maketitle{}`. Creating your own title page via LaTeX commands in the RMarkdown script or by a customized R function is a much easier and more flexible way to create a customized title page.


### `pre_processor.R` (optional, advanced)

In a few cases, pandoc options should be set dynamically.
E.g., the geometry of a document should depend on whether it uses two columns or just one.
`pre_processor.R` allow you do dynamically modify pandoc options, using plain R.
See the example script for how to use it.


### Variable Substitution

`default.yaml`, as well as `preamble.tex` supports substitution of the variable `<asset_path>`.
Whenever you mention `<asset_path>` in one of your files, it will be substituted by the path to the `indiedown` folder.


### Including Additional Assets

Most customized styles will include some additional assets, such as a logo or a special font. Assets can be put into arbitrary named folders. To access the assets from `default.yaml` or `preamble.tex`, simply use `<asset_path>/myasset` and the path will be correctly resolved by indiedown.


## Functions outside of the `indiedown`Folder

### Calling function

A wrapper function with an arbitrary name (usually your package name, e.g, `mydown`) can be called from the the rmarkdown document:

```yaml
output:
  mydown::mydown
```
This is just a wrapper around `indiedown::pdf_document_with_asset`, which does the work.
In the future, this function will be auto-generated by a helper function in indiedown.


### Writing your own LaTeX generator functions.

For most customizations, it is recommended to turn off the default LaTeX title page, and create your own title page via LaTeX commands. The basic repertory are the LaTeX commands `\large`, `\Large`, `\LARGE`, `\huge`, etc., along witch `vspace{1ex}`, but all LaTeX trickery can be applied. The LaTeX helper functions should be put to the `R` folder of your package.


### Usage demonstration by templates

RMarkdown Templates demonstrate the use of a customized style. RMarkdown requires you to put them to `inst/rmarkdown/templates/mytemplate`.
RStudio will recognize them and show them when you click 'New RMarkdown Document' and 'from Template'.
You can also use `usethis::use_rmarkdown_template()` to add a new template.


